<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>finleye</title>
    <description>Brooklyn based developer and coffee enthusiast</description>
    <link>http://finleye.com/</link>
    <atom:link href="http://finleye.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 14 Jan 2016 12:55:57 -0500</pubDate>
    <lastBuildDate>Thu, 14 Jan 2016 12:55:57 -0500</lastBuildDate>
    <generator>Jekyll v3.0.1</generator>
    
      <item>
        <title>Instagram Integration</title>
        <description>&lt;p&gt;Adding Instagram API integration to your application is pretty straight forward, but some parts can be tricky. I’ll walk through what I did, and hopefully make it an easy task if you decide to try it.&lt;/p&gt;

&lt;h4 id=&quot;adding-the-instagram-api-gem&quot;&gt;Adding the Instagram API gem&lt;/h4&gt;
&lt;p&gt;I’m using the &lt;a href=&quot;https://github.com/Instagram/instagram-ruby-gem&quot;&gt;Instagram API gem&lt;/a&gt; for &lt;a href=&quot;https://github.com/finleye/still-leaf&quot;&gt;this project&lt;/a&gt;. To add this gem to your &lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;Sinatra&lt;/a&gt; app, you’ll just need to do the following;&lt;/p&gt;

&lt;p&gt;Add the gem to your app’s &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;instagram&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And run &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle&lt;/code&gt; from the command line to install the gem.&lt;/p&gt;

&lt;p&gt;I added an initializer to set up them gem:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#/config/initializers/instagram.rb&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Instagram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configure&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;client_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;INSTAGRAM_CLIENT_ID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;client_secret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;INSTAGRAM_CLIENT_SECRET&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then add this to your application’s &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;instagram&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now that the Instagram gem is set up, we’ll use it in the application file.&lt;/p&gt;

&lt;h4 id=&quot;oauth-endpoints&quot;&gt;OAUTH Endpoints&lt;/h4&gt;
&lt;p&gt;Your application will need to know how to handle the handshake with Instagram’s API. You’ll need a few endpoints to handle this.&lt;/p&gt;

&lt;p&gt;The first endpoint will send the request for the authentication token.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/oauth/connect&#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;scope&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;s1&quot;&gt;&#39;likes public_content&#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Instagram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;authorize_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;redirect_uri: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;INSTAGRAM_CALLBACK_URL&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scope: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;scope&lt;/code&gt; part of this block tells their API what all you want access to. In this case I want the ability to like photos, and access to public content. Note that you’ll be providing a redirect URL as well. This tells Instagram where you send back the &lt;code class=&quot;highlighter-rouge&quot;&gt;access_token&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In the callback endpoint, you’ll need to save the &lt;code class=&quot;highlighter-rouge&quot;&gt;access_token&lt;/code&gt;, and then send them on their way with something to show.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/oauth/callback&#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Instagram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;redirect_uri: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;INSTAGRAM_CALLBACK_URL&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;access_token&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ig_access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;access_token&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;You&#39;ve logged in as @&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insta_client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Something went wrong.&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;redirect&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/user_recent_media&#39;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;One thing to note here is that &lt;code class=&quot;highlighter-rouge&quot;&gt;ig_access_token&lt;/code&gt; is being added to the &lt;code class=&quot;highlighter-rouge&quot;&gt;session&lt;/code&gt;. This is a given in Rails, but here you’ll need to enable sessions for Sinatra. Below you’ll class declaration, add &lt;code class=&quot;highlighter-rouge&quot;&gt;enable :sessions&lt;/code&gt;. Mine looks like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StillLeaf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Sinatra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;enable&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:sessions&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h4 id=&quot;show-the-user-something-from-instagram&quot;&gt;Show the user something from Instagram&lt;/h4&gt;
&lt;p&gt;You may have noticed in my OAUTH callback endpoint, that I redirect to &lt;code class=&quot;highlighter-rouge&quot;&gt;/user_recent_media&lt;/code&gt;. This action renders a view of the current users recent media from Instagram. That code looks like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/user_recent_media&#39;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;insta_client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@recent_media&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;insta_client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user_recent_media&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;haml&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:user_media&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You’ll see references to a method called &lt;code class=&quot;highlighter-rouge&quot;&gt;insta_client&lt;/code&gt;, references a memoization of the client so it can be reused. The &lt;code class=&quot;highlighter-rouge&quot;&gt;insta_client&lt;/code&gt; method looks like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;insta_client&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@insta_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Instagram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;access_token: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ig_access_token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If you want to see how &lt;code class=&quot;highlighter-rouge&quot;&gt;@user&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;@recent_meda&lt;/code&gt; are being used, take a look at &lt;a href=&quot;https://github.com/finleye/still-leaf/blob/master/views/user_media.haml&quot;&gt;the view in the repo&lt;/a&gt;, and the full application class can be found &lt;a href=&quot;https://github.com/finleye/still-leaf/blob/master/still_leaf.rb&quot;&gt;here in the repo&lt;/a&gt; as well.&lt;/p&gt;

&lt;p&gt;That covers everything to get the &lt;code class=&quot;highlighter-rouge&quot;&gt;access_token&lt;/code&gt; from Instagram, and use the client to get media. My next post will be about Instagram’s API sandbox mode and it’s limitations. Until then, feel free to contact me on &lt;a href=&quot;https://twitter.com/cfinley&quot;&gt;twitter&lt;/a&gt; or &lt;a href=&quot;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#116;&amp;#111;:&amp;#102;&amp;#105;&amp;#110;&amp;#108;&amp;#101;&amp;#121;&amp;#046;&amp;#099;&amp;#111;&amp;#114;&amp;#101;&amp;#121;&amp;#064;&amp;#103;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#046;&amp;#099;&amp;#111;&amp;#109;&quot;&gt;email&lt;/a&gt; me. See you soon!&lt;/p&gt;

</description>
        <pubDate>Thu, 14 Jan 2016 09:00:00 -0500</pubDate>
        <link>http://finleye.com/sinatra/instagram/2016/01/14/instagram-integration.html</link>
        <guid isPermaLink="true">http://finleye.com/sinatra/instagram/2016/01/14/instagram-integration.html</guid>
        
        
        <category>sinatra</category>
        
        <category>instagram</category>
        
      </item>
    
      <item>
        <title>Day 1</title>
        <description>&lt;p&gt;So you want to build a Sinatra app using Instagram’s API? Well you’re in luck! I’ll go though some of what I did, and hopefully provide some insight.&lt;/p&gt;

&lt;h4 id=&quot;getting-started&quot;&gt;Getting started&lt;/h4&gt;

&lt;p&gt;An easy solution for boiler-plating an app is to use &lt;a href=&quot;https://github.com/zachpendleton/snfn&quot;&gt;Snfn&lt;/a&gt;. Similar to &lt;code class=&quot;highlighter-rouge&quot;&gt;rails new commandsapp&lt;/code&gt;, you can run &lt;code class=&quot;highlighter-rouge&quot;&gt;snfn my_app&lt;/code&gt; to get something going. It throws together an application class, and gives you some minimal setup with a views folder and importantly a &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt;, for use with &lt;code class=&quot;highlighter-rouge&quot;&gt;rackup&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;That &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; file contains some information about how your app should be loaded and ran. You can take a look at the &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; file for &lt;a href=&quot;https://github.com/finleye/still-leaf&quot;&gt;Still Leaf&lt;/a&gt;, here &lt;a href=&quot;https://github.com/finleye/still-leaf/blob/master/config.ru&quot;&gt;in the repo&lt;/a&gt;. In mine you’ll see some load path stuff, bundler, and so on. What’s really important here is the last line:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StillLeaf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This actually kicks up the application and gives you something to look at. One confusing bit in the beginning that caused me issue was this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sx&quot;&gt;%w{config/initializers lib}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\/\..+$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;directory?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The problem here being the &lt;code class=&quot;highlighter-rouge&quot;&gt;config/initializers&lt;/code&gt;, the first element in the array. While this bit of code is provided by &lt;a href=&quot;https://github.com/zachpendleton/snfn&quot;&gt;Snfn&lt;/a&gt;, there is no &lt;code class=&quot;highlighter-rouge&quot;&gt;config/initializers&lt;/code&gt; directory provided. From the app directory just run this to clear up this issue.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mkdir config
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;config/
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;mkdir initializers&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then when you run &lt;code class=&quot;highlighter-rouge&quot;&gt;rackup&lt;/code&gt;, it won’t blow up trying to load nonexistent directories.&lt;/p&gt;

&lt;h4 id=&quot;how-to-handle-env-variables&quot;&gt;How to handle ENV variables&lt;/h4&gt;
&lt;p&gt;I knew I would be hosting this on &lt;a href=&quot;https://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt;, because it’s easy, free (at first), and well, mostly because I don’t know how to set up something on AWS. That’ll come in a much later post when I embark on that part of the journey.&lt;/p&gt;

&lt;p&gt;I like to use a gem called &lt;a href=&quot;https://github.com/bkeepers/dotenv&quot;&gt;dotenv&lt;/a&gt;, I’ve used it before and it works well enough for what I need. You set up a &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; in the root of the app, and it interacts in the application, the same way Heroku environment variables do.&lt;/p&gt;

&lt;p&gt;Here’s a &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; setup walkthrough;&lt;/p&gt;

&lt;p&gt;First, add it to your &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Gemfile&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:development&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;dotenv-rails&#39;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then add it to your &lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;touch .env
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; .env &amp;gt;&amp;gt; .gitignore&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then your &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; will look like this;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;INSTAGRAM_CLIENT_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;your_client_id
&lt;span class=&quot;nv&quot;&gt;INSTAGRAM_CLIENT_SECRET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;your_client_secret
&lt;span class=&quot;nv&quot;&gt;INSTAGRAM_CALLBACK_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://localhost:9292/oauth/callback
&lt;span class=&quot;nv&quot;&gt;GOOGLE_MAPS_GEOCODING_KEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;your_gmaps_geocodding_key&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You’ll need to add it to your &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; so the app knows how to load it;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# config.ru&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;RACK_ENV&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;production&#39;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;dotenv&#39;&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Dotenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then you can do something like this in the app to use your environment variables.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;INSTAGRAM_CLIENT_ID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Boom! Secure environment variables for running the app locally. Up next: I’ll walk though some of the set up the &lt;a href=&quot;https://www.instagram.com/developer/&quot;&gt;Instagram API&lt;/a&gt; and the pains of &lt;a href=&quot;https://www.instagram.com/developer/sandbox/&quot;&gt;sandbox mode&lt;/a&gt;.&lt;/p&gt;

</description>
        <pubDate>Wed, 13 Jan 2016 09:00:00 -0500</pubDate>
        <link>http://finleye.com/sinatra/instagram/2016/01/13/day-1.html</link>
        <guid isPermaLink="true">http://finleye.com/sinatra/instagram/2016/01/13/day-1.html</guid>
        
        
        <category>sinatra</category>
        
        <category>instagram</category>
        
      </item>
    
      <item>
        <title>What to call it</title>
        <description>&lt;p&gt;A while back, a co-worker of mine, &lt;a href=&quot;https://github.com/briancantrell&quot;&gt;Brian&lt;/a&gt;, told me about an idea for an app that would use the &lt;a href=&quot;https://www.instagram.com/developer/&quot;&gt;Instagram API&lt;/a&gt;. I wanted to help and decided to write a small &lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;Sinatra&lt;/a&gt; app to play with the API. A lot of frustration and learning later I figured out a few things;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Much of my Ruby knowledge turned out to be Rails knowledge. Small stuff, for example &lt;code class=&quot;highlighter-rouge&quot;&gt;#present?&lt;/code&gt; is part of Rails, not Ruby.&lt;/li&gt;
  &lt;li&gt;It’s tricky to build a Sinatra app and stick to its framework. I had to read up on Sinatra conventions in an attempt to not build of all the Rails &lt;em&gt;conveniences&lt;/em&gt; (read crutches) that I counted on.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.instagram.com/developer/sandbox/&quot;&gt;Instagram’s Sandbox&lt;/a&gt; mode for their API will make you pull your hair out if you don’t understand it.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;it-needs-a-better-name&quot;&gt;It needs a (better) name&lt;/h3&gt;
&lt;p&gt;But first, I had to figure out what to call it. I know you shouldn’t name things first, but I had to at least figure out what to call the repo. I started with &lt;strong&gt;Instalocation&lt;/strong&gt;. Terrible, I know, but it was a location search of the API, so it seemed practical. I decided the best bet was to try a random app name generator. I landed on &lt;strong&gt;Still Leaf&lt;/strong&gt; and went with it.&lt;/p&gt;

&lt;p&gt;My next post will be about some of the gems I used, and some things I learned about &lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;Sinatra&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;See you soon!&lt;/p&gt;

</description>
        <pubDate>Tue, 12 Jan 2016 09:21:19 -0500</pubDate>
        <link>http://finleye.com/sinatra/heroku/instagram/2016/01/12/what-to-call-it.html</link>
        <guid isPermaLink="true">http://finleye.com/sinatra/heroku/instagram/2016/01/12/what-to-call-it.html</guid>
        
        
        <category>sinatra</category>
        
        <category>heroku</category>
        
        <category>instagram</category>
        
      </item>
    
      <item>
        <title>Totally not Livejournal</title>
        <description>&lt;p&gt;With less complaining than Tumblr, and fewer feelings than Livejournal, I hope to make something here I can be proud of. I’ll try to share things I learn while working on a side projects.&lt;/p&gt;

&lt;p&gt;I’m working on my first post about a &lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;Sinatra&lt;/a&gt; app I started working on over the weekend. Where I realized that a lot of my Ruby knowledge turned out to actually be Rails knowledge. I’m getting know know Rack better, and hopefully I’ll figure out how I can host stuff &lt;em&gt;without&lt;/em&gt; &lt;a href=&quot;https://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In the mean time, get to know me though my &lt;a href=&quot;https://twitter.com/cfinley/&quot;&gt;Twitter&lt;/a&gt;, &lt;a href=&quot;https://www.instagram.com/cfinley/&quot;&gt;Instagram&lt;/a&gt;, or &lt;a href=&quot;https://github.com/finleye&quot;&gt;GitHub&lt;/a&gt;. Fell free to reach out on any of those, or email me at &lt;a href=&quot;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#116;&amp;#111;:&amp;#102;&amp;#105;&amp;#110;&amp;#108;&amp;#101;&amp;#121;&amp;#046;&amp;#099;&amp;#111;&amp;#114;&amp;#101;&amp;#121;&amp;#064;&amp;#103;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#046;&amp;#099;&amp;#111;&amp;#109;&quot;&gt;&amp;#102;&amp;#105;&amp;#110;&amp;#108;&amp;#101;&amp;#121;&amp;#046;&amp;#099;&amp;#111;&amp;#114;&amp;#101;&amp;#121;&amp;#064;&amp;#103;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#046;&amp;#099;&amp;#111;&amp;#109;&lt;/a&gt;!&lt;/p&gt;

</description>
        <pubDate>Mon, 11 Jan 2016 20:35:36 -0500</pubDate>
        <link>http://finleye.com/livejournal/2016/01/11/this-is-it.html</link>
        <guid isPermaLink="true">http://finleye.com/livejournal/2016/01/11/this-is-it.html</guid>
        
        
        <category>livejournal</category>
        
      </item>
    
  </channel>
</rss>
